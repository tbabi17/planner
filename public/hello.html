
<html>
<head>
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <script src="/node_modules/angular/angular.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
  <script src="/public/FileSaver.js"></script>
  <script src="/public/jquery.cookie.js"></script>
  <script src="/node_modules/html-docx-js/dist/html-docx.js"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <link rel="stylesheet" href="public/css.css" />

</head>
<body>
  <div class="modal" ng-app="plannerApp" ng-controller="plannerCtrl">
  <div class="modal__container">
    <div class="modal__featured">
      <button type="button" class="button--transparent button--close" ng-click="next(npage, cpage)">
        <svg class="nc-icon glyph" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32">
          <g><path fill="#ffffff" d="M1.293,15.293L11,5.586L12.414,7l-8,8H31v2H4.414l8,8L11,26.414l-9.707-9.707 C0.902,16.316,0.902,15.684,1.293,15.293z"></path> </g></svg>
        <span class="visuallyhidden">Return to Product Page</span>
      </button>
      <img src="https://cdn-icons-png.flaticon.com/512/3176/3176298.png" class="modal__product"/>
      <div class="modal__product_info">
        <span>Заавар</span>
        Дээр нь элсэлтийн шалгалтынх нь талаар сонсоод надаас илүү сайн хүүхдүүд
        зөндөө байгаа даа, сонгоны хүүхдүүд л тэнцэнэ дээ гээд сонирхож байсан ч
        гэлээ өөрийгөө чадахгүй гэж бодоод орхичихсон байсан.
      </div>
      <div class="modal__circle"></div>
    </div>
    <div class="modal__content">
      <form id="form_0">
        <h2>Бизнес төлөвлөгөө</h2>
        <label class="subtitle">Та бизнес төлөвлөгөөгөө өөрөө бичих боломжтой</label>
        <hr>
        <div id="signed" style="margin-top: 30px;">
          <span style="font-size: 13px; color: #6f6f6f; display: block; margin-bottom: 10px;">Та өөрийн Google аккаунтыг ашиглан системд бүртгүүлэн ашиглах боломжтой.</span>
          <script src="https://accounts.google.com/gsi/client" async defer></script>
          <div id="g_id_onload"
               data-client_id="313982312140-k2dq3b0usf4dcfrf2na4vjetvno8dgdi.apps.googleusercontent.com"
               data-callback="handleCredentialResponse">
          </div>
          <div class="g_id_signin" data-type="standard" data-locale="mn_MN" data-size="large" data-width="300" data-text="Google-р нэвтрэх" data-shape="circle"></div>
        </div>

        <div id="startPlan">
          <button type="button" class="button" hidden ng-click="onSignIn()" id="startBtnPlan" style="margin-top: 30px;">ЭХЛЭХ</button>
          <p ng-if="signedUser.name">
            Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
          <table id="planList" hidden class="plan">
            <thead>
              <tr>
                <td style="color: #939393;text-align:left;">#</td>
                <td style="color: #939393;text-align:left;">Төслийн нэр</td>
                <td style="color: #939393;text-align:left;">Үүсгэсэн хэрэглэгч</td>
                <td style="color: #939393;text-align:left;">Үүсгэсэн огноо</td>
                <td style="color: #939393;text-align:left;">Төлөв</td>
                <td style="color: #939393;text-align:left;">Үйлдэл</td>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="item in planlist">
                <td>{{$index+1}}</td>
                <td style="width:35%" ng-click="go(item)">{{item.pr_name}}</td>
                <td style="width:20%" ng-click="go(item)">{{item.pr_user_name}}</td>
                <td style="width:15%">{{item.pr_created_date.replace('T', ' ').replace('Z', ' ')}}</td>
                <td style="width:15%">Идэвхтэй</td>
                <td style="width:15%"><a href="" class="del" ng-click="deletePlan(item)">Устгах -</a>
                      <a href="" ng-click="wordX(item)">Татах</a>
                </td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td></td>
                <td><a href="" ng-click="newPlan()">Шинээр үүсгэх +<a></td>
                <td></td>
                <td></td>
                <td ></td>
                <td ></td>
              </tr>
            </tfoot>
          </table>
        </div>
      </form>

      <form id="form_1" hidden ng-submit="next(2,1, true)">
        <p>Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
        <hr>
        <h2>1/10</h2>
        <br>
        <label class="subtitle">Үндсэн мэдээлэл</label>
        <br>
        <ul class="form-list">
          <li class="form-list__row form-list__row--inline">
            <div class="c2">
              <label>Төслийн нэр</label>
              <input type="text" name="pr_name" required="" ng-model="plan.pr_name" />
            </div>
            <div class="c2">
              <label>Санхүүжүүлэгч байгууллага</label>
              <input type="text" name="pr_fund_org" required="" ng-model="plan.pr_fund_org" />
            </div>
            <div class="c1">
              <label>Хэрэгжүүлэх хугацаа</label>
              <select ng-model="plan.pr_duration" name="pr_duration" required>
                <option ng-value="1" value="1">1 жил</option>
                <option ng-value="2" value="2">2 жил</option>
                <option ng-value="3" value="3">3 жил</option>
              </select>
            </div>
          </li>

          <li class="form-list__row form-list__row--inline">
            <div class="c2">
              <label>Төсөл хэрэгжүүлэгчийн нэр</label>
              <input type="text" name="pr_owner_name" required="" ng-model="plan.pr_owner_name" />
            </div>
            <div class="c3">
              <label>Зорилго</label>
              <textarea type="text" name="pr_purpose" required rows="5" ng-model="plan.pr_purpose">{{plan.pr_purpose}}</textarea>
            </div>
            <div class="c3">
              <label>Хүлээгдэж буй үр дүн</label>
              <textarea type="text" name="pr_expected_result" required required rows="5" ng-model="plan.pr_expected_result">{{plan.pr_expected_result}}</textarea>
            </div>
          </li>

          <li class="form-list__row form-list__row--inline">
            <div class="c1">
              <label>Төсөв нийт</label>

                <input type="text" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"
                name="pr_budget_total" required="" ng-model="plan.pr_budget_total"/>
            </div>
            <div class="c1">
              <label>Санхүүжүүлэгчээс</label>
              <input type="text" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" name="pr_budget_funder" required="" ng-model="plan.pr_budget_funder"/>
            </div>
            <div class="c1">
              <label>Өөрөөс</label>
              <input type="text" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" name="pr_budget_me" required="" ng-model="plan.pr_budget_me"/>
            </div>
            <div class="c2">
            </div>
          </li>

          <li class="form-list__row form-list__row--inline">
            <div class="c1">
              <label>Бизнесийн танилцуулга</label>
              <textarea name="pr_business_detail" required="" rows="5" ng-model="plan.pr_business_detail">{{plan.pr_business_detail}}</textarea>
            </div>
            <div class="c1">
              <label>Төслийн үндэслэл</label>
              <textarea name="pr_grounds" required="" rows="5" ng-model="plan.pr_grounds">{{plan.pr_grounds}}</textarea>
            </div>
          </li>


          <!-- <li class="form-list__row form-list__row--inline">
            <div>
              <label>Expiration Date</label>
              <div class="form-list__input-inline">
                <input type="text" name="cc_month" placeholder="MM"  pattern="\\d*" minlength="2" maxlength="2" required="" />
                <input type="text" name="cc_year" placeholder="YY"  pattern="\\d*" minlength="2" maxlength="2" required="" />
              </div>
            </div>
            <div>
              <label>
                CVC

                <a href="#cvv-modal" class="button--transparent modal-open button--info">
                  <svg class="nc-icon glyph" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16"><g> <path fill="#35a4fb" d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,13c-0.6,0-1-0.4-1-1c0-0.6,0.4-1,1-1s1,0.4,1,1 C9,12.6,8.6,13,8,13z M9.5,8.4C9,8.7,9,8.8,9,9v1H7V9c0-1.3,0.8-1.9,1.4-2.3C8.9,6.4,9,6.3,9,6c0-0.6-0.4-1-1-1 C7.6,5,7.3,5.2,7.1,5.5L6.6,6.4l-1.7-1l0.5-0.9C5.9,3.6,6.9,3,8,3c1.7,0,3,1.3,3,3C11,7.4,10.1,8,9.5,8.4z"></path> </g></svg>
                  <span class="visuallyhidden">What is CVV?</span>
                </a>
              </label>
              <input type="text" name="cc_cvc" placeholder="123" pattern="\\d*" minlength="3" maxlength="4" required="" />
            </div>
          </li> -->
          <li>
            <button type="button" class="button red" ng-click="next(0,1)">БУЦАХ</button>
            <button type="submit" class="button">ЦААШ</button>
            <button type="button" class="button" style="right: 0" ng-click="planSave(1)">ХАДГАЛАХ</button>
          </li>
        </ul>
      </form>

      <form id="form_2" hidden  ng-submit="next(3,2)">
        <p>Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
        <hr>
        <div class="formed">
          <h2>2/10</h2>
          <br>
          <label class="subtitle">Хөрөнгө оруулалтын төлөвлөгөө</label>
          <br>

          <table>
            <thead>
              <tr>
                <td>#</td>
                <td style="width: 30%">Зүйл</td>
                <td style="width: 13%;">Зардал</td>
                <td style="width: 10%">Огноо</td>
                <td style="width: 40%">Тайлбар</td>
                <td style="width: 7%"></td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td></td>
                <td >Тоног төхөөрөмж</td>
                <td></td>
                <td></td>
                <td ></td>
                <td></td>
              </tr>
              <tr ng-repeat="item in plan.pr_investment_plan | filter:filterByInvestment1">
                <td>{{$index+1}}</td>
                <td><input type="text" name="investment_item" required="" ng-model="item.investment_item" /></td>
                <td><input type="text" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" name="investment_cost_{{item.id}}" required ng-model="item.investment_cost"/></td>
                <td><input date-format type="date" name="investment_date" required="" ng-model="item.investment_date"/></td>
                <td ><input type="text" name="investment_detail" required="" ng-model="item.investment_detail"/></td>
                <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_investment_plan, item)" class="del">Мөр хасах -</a></td>
              </tr>
              <tr>
                <td></td>
                <td><a href="" ng-click="add_item_to_array(plan.pr_investment_plan, 'pr_investment_plan', 0)">Мөр нэмэх +<a></td>
                <td></td>
                <td></td>
                <td ></td>
              </tr>
              <tr>
                <td></td>
                <td >Эргэлтийн хөрөнгө</td>
                <td style="text-align: right;"></td>
                <td></td>
                <td ></td>
              </tr>
              <tr ng-repeat="item in plan.pr_investment_plan | filter:filterByInvestment2">
                <td>{{$index+1}}</td>
                <td><input type="text" name="investment_item" required="" ng-model="item.investment_item" /></td>
                <td><input type="text" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" name="investment_cost_{{item.id}}" required="" ng-model="item.investment_cost"/></td>
                <td><input date-format type="date" name="investment_date" required="" ng-model="item.investment_date"/></td>
                <td ><input type="text" name="investment_detail" required="" ng-model="item.investment_detail"/></td>
                <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_investment_plan, item)" class="del">Мөр хасах -</a></td>
              </tr>
              <tr>
                <td></td>
                <td><a href="" ng-click="add_item_to_array(plan.pr_investment_plan, 'pr_investment_plan', 1)">Мөр нэмэх +<a></td>
                <td></td>
                <td></td>
                <td ></td>
              </tr>
            </tbody>
          </table>

          <br>
          <label class="subtitle">Компанийн хөрөнгө, өр авлага</label>
          <br>
          <table>
            <thead>
              <tr>
                <td>#</td>
                <td style="width: 30%">Хөрөнгө</td>
                <td style="width: 10%;">Тоо, хэмжээ</td>
                <td style="width: 15%">Үнэлгээ</td>
                <td style="width: 45%">Зориулалт</td>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="item in plan.pr_assets">
                <td>{{$index+1}}</td>
                <td><input type="text" name="asset_item" ng-model="item.asset_item" required="" /></td>
                <td><input type="number" name="asset_total" ng-model="item.asset_total" required="" /></td>
                <td ><input type="text" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" name="asset_evaluation_{{item.id}}" ng-model="item.asset_evaluation" required="" /></td>
                <td><input type="text" name="asset_intend" ng-model="item.asset_intend" required="" /></td>
              </tr>
              <tr>
                <td></td>
                <td><a href=""  ng-click="add_item_to_array(plan.pr_assets, 'pr_assets')">Мөр нэмэх +<a></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
          <ul class="form-list">
            <li>
              <button type="button" class="button red" ng-click="next(1,2)">БУЦАХ</button>
              <button type="submit" class="button">ЦААШ</button>
            </li>
          </ul>
      </form>

      <form id="form_3" hidden  ng-submit="next(4,3)">
        <p>Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
        <hr>
        <div class="formed">
        <h2>3/10</h2>
        <br>
        <label class="subtitle">Өрсөлдөгчийн судалгаа</label>
        <br>

        <table>
          <thead>
            <tr>
              <td>#</td>
              <td style="width: 18%">Нэр</td>
              <td style="width: 17%;">Байршил</td>
              <td style="width: 10%">ЗЗ эзлэх хувь</td>
              <td style="width: 10%">Үнэ</td>
              <td style="width: 20%">Давуу тал</td>
              <td style="width: 20%">Сул тал</td>
              <td style="width: 5%"></td>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in plan.pr_competitors">
              <td>{{$index+1}}</td>
              <td><input type="text" name="competitor_name" required="" ng-model="item.competitor_name"/></td>
              <td><input type="text" name="competitor_location" required="" ng-model="item.competitor_location"/></td>
              <td><input type="number" name="competitor_percent" required="" ng-model="item.competitor_percent"/></td>
              <td ><input type="text" name="competitor_price_{{item.id}}" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" required="" ng-model="item.competitor_price"/></td>
              <td ><input type="text" name="competitor_advantage" required="" ng-model="item.competitor_advantage"/></td>
              <td ><input type="text" name="competitor_weakness" required="" ng-model="item.competitor_weakness"/></td>
              <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_competitors, item)" class="del">Мөр хасах -</a></td>
            </tr>
            <tr>
              <td></td>
              <td><a href="" ng-click="add_item_to_array(plan.pr_competitors, 'pr_competitors')">Мөр нэмэх +<a></td>
              <td></td>
              <td></td>
              <td ></td>
            </tr>
          </tbody>
        </table>

        <br>
        <label class="subtitle">Нийлүүлэгчийн судалгаа</label>
        <br>
        <table>
          <thead>
            <tr>
              <td>#</td>
              <td style="width: 18%">Нийлүүлэгч нэр</td>
              <td style="width: 15%;"><span>Түүхий эд</span></td>
              <td style="width: 8%"><span>Хэмжих нэгж</span></td>
              <td style="width: 12%"><span>Нэг удаагийн нийлүүлэх хэмжээ</span></td>
              <td style="width: 10%"><span>Хэр ойроос нийлүүлдэг</span></td>
              <td style="width: 10%"><span>Нэгжийн үнэ</span></td>
              <td style="width: 12%"><span>Үйлдвэрлэгчээс х.х зайд байдаг</span></td>
              <td style="width: 12%"><span>Тээврийн зардал</span></td>
              <td style="width: 5%"></td>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in plan.pr_suppliers">
              <td>{{$index+1}}</td>
              <td><input type="text" name="supplier_name" required="" ng-model="item.supplier_name"/></td>
              <td><input type="text" name="supplier_item" required="" ng-model="item.supplier_item"/></td>
              <td>
                <select ng-model="item.supplier_unit">
                  <option value="1">ш</option>
                  <option value="2">л</option>
                  <option value="3">кг</option>
                  <option value="4">тн</option>
                </select>
              </td>
              <td ><input type="number" name="supplier_once_qty" required="" ng-model="item.supplier_once_qty"/></td>
              <td ><input type="number" name="supplier_how_near" required="" ng-model="item.supplier_how_near"/></td>
              <td ><input type="text" name="supplier_price_{{item.id}}" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" required ng-model="item.supplier_price"/></td>
              <td ><input type="text" name="supplier_how_far_vendor" required="" ng-model="item.supplier_how_far_vendor"/></td>
              <td ><input type="text" name="supplier_transport_cost_{{item.id}}" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" required ng-model="item.supplier_transport_cost"/></td>
              <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_suppliers, item)" class="del">Мөр хасах -</a></td>
            </tr>
            <tr>
              <td></td>
              <td><a href="" ng-click="add_item_to_array(plan.pr_suppliers, 'pr_suppliers')">Мөр нэмэх +<a></td>
              <td></td>
              <td></td>
              <td ></td>
            </tr>
          </tbody>
        </table>

        <br>
        <label class="subtitle">Зах зээлийн судалгаа</label>
        <br>
        <ul class="form-list">
          <li class="form-list__row form-list__row--inline">
            <div class="c2">
              <label>Зорилтот зах зээл</label>
              <input type="text" name="pr_target_market" required="" ng-model="plan.pr_target_market"/>
            </div>
            <div class="c1">
              <label>Хэрэглэгчдийн тоо</label>
              <input type="number" name="pr_client_count" required="" ng-model="plan.pr_client_count"/>
            </div>
            <div class="c1">
              <label>Өрсөлдөгчдийн тоо</label>
              <input type="number" name="pr_competitor_count" required="" ng-model="plan.pr_competitor_count"/>
            </div>
            <div class="c2">
            </div>
          </li>
        </ul>
      </div>
        <ul class="form-list">
          <li>
            <button type="button" class="button red" ng-click="next(2,3)">БУЦАХ</button>
            <button type="submit" class="button">ЦААШ</button>
          </li>
        </ul>
      </form>


      <form id="form_4" hidden  ng-submit="next(5,4)">
        <p>Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
        <hr>
        <div class="formed">
        <h2>4/10</h2>
        <br>
        <label class="subtitle">ДБСА-ийн шинжилгээ</label>
        <br>
        <table>
          <thead>
            <tr>
              <td style="width: 20%">Давуу тал (дотоод)</td>
              <td style="width: 18%;"><span>Сул тал (дотоод)</span></td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><textarea type="text" name="pr_local_advatange" required rows="4" ng-model="plan.pr_local_advatange">{{plan.pr_local_advatange}}</textarea></td>
              <td><textarea type="text" name="pr_local_weakness" required rows="4" ng-model="plan.pr_local_weakness">{{plan.pr_local_weakness}}</textarea></td>
            </tr>
          </tbody>
          <thead>
            <tr>
              <td style="width: 20%">Боломж (гадаад)</td>
              <td style="width: 18%;"><span>Аюул (гадаад)</span></td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><textarea type="text" name="pr_global_opportunity" required rows="4" ng-model="plan.pr_global_opportunity">{{plan.pr_global_opportunity}}</textarea></td>
              <td><textarea type="text" name="pr_global_dangerius" required rows="4" ng-model="plan.pr_global_dangerius">{{plan.pr_global_dangerius}}</textarea></td>
            </tr>
          </tbody>
        </table>


        <br>
        <label class="subtitle">Хэрэглэгчийн судалгаа</label>
        <br>
        <ul class="form-list">
          <li class="form-list__row form-list__row--inline">
            <div class="c2">
              <label>Дэлгэрэнгүй бичнэ үү</label>
              <textarea type="text" name="pr_client_survey" required rows="5" ng-model="plan.pr_client_survey">{{plan.pr_client_survey}}</textarea>
            </div>
          </li>
        </ul>
      </div>
          <ul class="form-list">
            <li>
              <button type="button" class="button red" ng-click="next(3,4)">БУЦАХ</button>
              <button type="submit" class="button">ЦААШ</button>
            </li>
          </ul>
      </form>


      <form id="form_5" hidden ng-submit="next(6,5)">
        <p>Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
        <hr>
        <div class="formed">
        <h2>5/10</h2>
        <br>
        <label class="subtitle">Эрсдлийн шинжилгээ ба менежмент</label>
        <br>
        <table>
          <thead>
            <tr>
              <td>#</td>
              <td style="width: 30%">Үйл ажиллагаа</td>
              <td style="width: 35%;">Эрсдэл</td>
              <td style="width: 35%;">Буруулах арга зам</td>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in plan.pr_risk_management">
              <td>{{$index+1}}</td>
              <td>{{item.risk_name}}</td>
              <td><textarea type="text" name="risk_detial" required rows="4" ng-model="item.risk_detial">{{item.risk_detial}}</textarea></td>
              <td><textarea type="text" name="risk_against" required rows="4" ng-model="item.risk_against">{{item.risk_against}}</textarea></td>
            </tr>
          </tbody>
        </table>
      </div>
        <ul class="form-list">
          <li>
            <button type="button" class="button red" ng-click="next(4,5)">БУЦАХ</button>
            <button type="submit" class="button">ЦААШ</button>
          </li>
        </ul>
      </form>

      <form id="form_6" hidden  ng-submit="next(7,6)">
        <p>Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
        <hr>
        <div class="formed">
        <h2>6/10</h2>
        <br>
        <label class="subtitle">Маркетингийн төлөвлөгөө</label>
        <br>
        <ul class="form-list">
          <li class="form-list__row form-list__row--inline">
            <div class="c2">
              <label>Бүтээгдэхүүн</label>
              <input type="text" name="pr_marketing_plan_product" required ng-model="plan.pr_marketing_plan_product"/>
            </div>
            <div class="c1">
              <label>Үнэ</label>
              <input type="text" name="pr_marketing_plan_price" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" required ng-model="plan.pr_marketing_plan_price"></textarea>
            </div>
            <div class="c2">
              <label>Байршил түгээлт</label>
              <textarea type="text" name="pr_marketing_plan_distribution" required rows="5" ng-model="plan.pr_marketing_plan_distribution"></textarea>
            </div>
            <div class="c3">
              <label>Зар сурталчилгаа</label>
              <textarea type="text" name="pr_marketing_plan_reclam" required rows="5" ng-model="plan.pr_marketing_plan_reclam"></textarea>
            </div>
          </li>
        </ul>

        <br>
        <label class="subtitle">Борлуулалт, борлуулалтын сувгууд</label>
        <br>
        <table>
          <tbody>
            <thead>
              <tr>
                <td>#</td>
                <td style="width: 25%">Борлуулалтын цэг</td>
                <td style="width: 20%;">Байршил</td>
                <td style="width: 15%;">Борлуулалтын орлого</td>
                <td style="width: 15%;">Гэрээ байгуулсан эсэх</td>
                <td style="width: 12%;">Төлбөрийн хэлбэр</td>
                <td style="width: 13%;">Нөхцөл</td>
                <td style="width: 5%"></td>
              </tr>
            </thead>
            <tr ng-repeat="item in plan.pr_sales_sectors">
              <td>{{$index+1}}</td>
              <td><input type="text" required ng-model="item.sales_point_name"/></td>
              <td><input type="text" required ng-model="item.sales_point_location"/></td>
              <td><input type="text" required name="sales_point_income_{{item.id}}" ng-model="item.sales_point_income" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td>
                  <select ng-model="item.sales_point_iscontracted">
                    <option ng-value="1">Тийм</option>
                    <option ng-value="2">Үгүй</option>
                  </select>
              </td>
              <td>
                <select ng-model="item.sales_point_paymenttype">
                  <option ng-value="1">Бэлнээр</option>
                  <option ng-value="2">Бэлэн бусаар</option>
                </select>
              </td>
              <td><input type="text" required ng-model="item.sales_point_conditions"/></td>
              <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_sales_sectors, item)" class="del">Мөр хасах -</a></td>
            </tr>
            <tr>
              <td></td>
              <td><a href="" ng-click="add_item_to_array(plan.pr_sales_sectors, 'pr_sales_sectors')">Мөр нэмэх +<a></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
          </tbody>
        </table>
        <br>
        <label class="subtitle">Санхүүгийн төлөвлөгөөний дэлгэрэнгүй</label>
        <br>
        <ul class="form-list">
          <li class="form-list__row form-list__row--inline">
            <div class="c2">
              <label>Хүснэгт бүрийн дараа дэлгэрэнгүй мэдээллийг өгүүлбэрээр бичнэ.</label>
              <textarea name="pr_finance_plan_detail" required rows="5" ng-model="plan.pr_finance_plan_detail">{{plan.pr_finance_plan_detail}}</textarea>
            </div>
          </li>
        </ul>
        </div>
        <ul class="form-list">
          <li>
            <button type="button" class="button red" ng-click="next(5,6)">БУЦАХ</button>
            <button type="submit" class="button">ЦААШ</button>
          </li>
        </ul>

      </form>

      <form id="form_7" hidden ng-submit="next(8,7)">
        <p>Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
        <hr>
        <div class="formed">
        <h2>7/10</h2>
        <label class="subtitle">Үйлдвэрлэл/ Үйлчилгээ</label>
        <br>
        <table>
          <tbody>
            <thead>
              <tr>
                <td rowspan="2">#</td>
                <td style="width: 20%" rowspan="2">Бүтээгдэхүүн</td>
                <td style="width: 7%;" rowspan="2">Хэмжих нэгж</td>
                <td style="width: 25%;" colspan="3">Үйлдвэрлэл хэмжээ</td>
                <td style="width: 23%;" colspan="3">Нэгжийн үнэ</td>
                <td style="width: 25%;" colspan="3">Борлуулалтын орлого</td>
                <td></td>
              </tr>
              <tr>
                <td>{{year-3}}</td>
                <td>{{year-2}}</td>
                <td>{{year-1}}</td>
                <td>{{year-3}}</td>
                <td>{{year-2}}</td>
                <td>{{year-1}}</td>
                <td>{{year-3}}</td>
                <td>{{year-2}}</td>
                <td>{{year-1}}</td>
              </tr>
            </thead>
            <tr ng-repeat="item in plan.pr_productions">
              <td>{{$index+1}}</td>
              <td><input type="text" required ng-model="item.production_product_name"/></td>
              <td>
                  <select ng-model="item.production_product_unit">
                    <option value="1">ш</option>
                    <option value="2">л</option>
                    <option value="3">кг</option>
                    <option value="4">тн</option>
                  </select>
              </td>
              <td><input type="number" required ng-model="item.production_vol1"/></td>
              <td><input type="number" required ng-model="item.production_vol2"/></td>
              <td><input type="number" required ng-model="item.production_vol3"/></td>
              <td><input type="text" required name="production_price1_{{item.id}}" ng-model="item.production_price1" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="text" required name="production_price2_{{item.id}}" ng-model="item.production_price2" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="text" required name="production_price3_{{item.id}}" ng-model="item.production_price3" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="text" required name="production_income1_{{item.id}}" ng-model="item.production_income1" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="text" required name="production_income2_{{item.id}}" ng-model="item.production_income2" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="text" required name="production_income3_{{item.id}}" ng-model="item.production_income3" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_productions, item)" class="del">Мөр хасах -</a></td>
            </tr>
            <tr>
              <td></td>
              <td><a href="" ng-click="add_item_to_array(plan.pr_productions, 'pr_productions')">Мөр нэмэх +<a></td>
              <td></td>
              <td></td>
              <td ></td>
            </tr>
          </tbody>
        </table>

        <br>
        <label class="subtitle">Түүхий эд материалын зардал</label>
        <br>
        <table style="width: 70%;">
          <tbody>
            <thead>
              <tr>
                <td rowspan="2">#</td>
                <td style="width: 45%" rowspan="2">Бүтээгдэхүүн</td>
                <td style="width: 50%;" colspan="3">Түүхий эдийн нийт өртөг</td>
                <td style="width: 5%;"></td>
              </tr>
              <tr>
                <td>{{year-3}}</td>
                <td>{{year-2}}</td>
                <td>{{year-1}}</td>
              </tr>
            </thead>
            <tr ng-repeat="item in plan.pr_raw_materials">
              <td>{{$index+1}}</td>
              <td><input type="text" required ng-model="item.raw_product"/></td>
              <td><input type="text" required name="raw_cost1_{{item.id}}" ng-model="item.raw_cost1" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="text" required name="raw_cost2_{{item.id}}" ng-model="item.raw_cost2" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="text" required name="raw_cost3_{{item.id}}" ng-model="item.raw_cost3" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_raw_materials, item)" class="del">Мөр хасах -</a></td>
            </tr>
            <tr>
              <td></td>
              <td><a href="" ng-click="add_item_to_array(plan.pr_raw_materials, 'pr_raw_materials')">Мөр нэмэх +<a></td>
              <td></td>
              <td></td>
              <td ></td>
            </tr>
          </tbody>
        </table>
      </div>
        <ul class="form-list">
          <li>
            <button type="button" class="button red" ng-click="next(6,7)">БУЦАХ</button>
            <button type="submit" class="button">ЦААШ</button>
          </li>
        </ul>
      </form>

      <form id="form_8" hidden ng-submit="next(9,8)">
        <p>Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
        <hr>
        <div class="formed">
        <h2>8/10</h2>
        <br>
        <label class="subtitle">Цалингийн зардал</label>
        <br>
        <table>
          <tbody>
            <thead>
              <tr>
                <td rowspan="2">#</td>
                <td style="width: 20%" rowspan="2">Албар тушаал</td>
                <td style="width: 25%;" colspan="2">{{year-3}}</td>
                <td style="width: 25%;" colspan="2">{{year-2}}</td>
                <td style="width: 25%;" colspan="2">{{year-1}}</td>
                <td style="width: 5%;"></td>
              </tr>
              <tr>
                <td>Сар цалин</td>
                <td>Жилийн цалин</td>
                <td>Сар цалин</td>
                <td>Жилийн цалин</td>
                <td>Сар цалин</td>
                <td>Жилийн цалин</td>
              </tr>
              <tr>
                <td colspan="8" style="text-align: left !important;">Одоо байгаа</td>
              </tr>
            </thead>
            <tr ng-repeat="item in plan.pr_salary_costs | filter:filterBySalaryType1">
                <td>{{$index+1}}</td>
                <td><input type="text" required ng-model="item.salary_person"/></td>
                <td><input type="text" required name="salary_month1_{{item.id}}" ng-model="item.salary_month1" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><input type="text" required name="salary_year1_{{item.id}}"  ng-model="item.salary_year1" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><input type="text" required name="salary_month2_{{item.id}}"  ng-model="item.salary_month2" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><input type="text" required name="salary_year2_{{item.id}}"  ng-model="item.salary_year2" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><input type="text" required name="salary_month3_{{item.id}}"  ng-model="item.salary_month3" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><input type="text" required name="salary_year3_{{item.id}}"  ng-model="item.salary_year3" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_salary_costs, item)" class="del">Мөр хасах -</a></td>
            </tr>
            <tr>
              <td></td>
              <td><a href="" ng-click="add_item_to_array(plan.pr_salary_costs, 'pr_salary_costs', 0)">Мөр нэмэх +<a></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <thead>
              <tr>
                <td colspan="8" style="text-align: left !important;">Шинээр авах</td>
              </tr>
            </thead>
            <tr ng-repeat="item in plan.pr_salary_costs | filter:filterBySalaryType2">
                <td>{{$index+1}}</td>
                <td><input type="text" required ng-model="item.salary_person"/></td>
                <td><input type="text" required name="salary_month1_{{item.id}}" ng-model="item.salary_month1" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><input type="text" required name="salary_year1_{{item.id}}"  ng-model="item.salary_year1" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><input type="text" required name="salary_month2_{{item.id}}"  ng-model="item.salary_month2" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><input type="text" required name="salary_year2_{{item.id}}"  ng-model="item.salary_year2" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><input type="text" required name="salary_month3_{{item.id}}"  ng-model="item.salary_month3" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><input type="text" required name="salary_year3_{{item.id}}"  ng-model="item.salary_year3" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
                <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_salary_costs, item)" class="del">Мөр хасах -</a></td>
            </tr>
            <tr>
              <td></td>
              <td><a href="" ng-click="add_item_to_array(plan.pr_salary_costs, 'pr_salary_costs', 1)">Мөр нэмэх +<a></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
        <ul class="form-list">
          <li>
            <button type="button" class="button red" ng-click="next(7,8)">БУЦАХ</button>
            <button type="submit" class="button">ЦААШ</button>
          </li>
        </ul>
      </form>

      <form id="form_9" hidden ng-submit="next(10,9)">
        <p>Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
        <hr>
        <div class="formed">
        <h2>9/10</h2>
        <br>
        <label class="subtitle">Элэгдлийн зардал</label>
        <br>
        <table>
          <tbody>
            <thead>
              <tr>
                <td>#</td>
                <td style="width: 35%">Байр ба тоног төхөөрөмж</td>
                <td style="width: 15%;">Нийт үнэлгээ</td>
                <td style="width: 15%;">Жилийн хорогдолын хувь</td>
                <td style="width: 15%;">Жилийн хорогдол</td>
                <td style="width: 15%;">Сарын хорогдол</td>
                <td style="width: 5%;"></td>
              </tr>
              <tr>
                <td colspan="6" style="text-align: left !important;">Одоо байгаа</td>
              </tr>
            </thead>
            <tr ng-repeat="item in plan.pr_depreciation_costs | filter: filterByDepreciationCost1">
              <td>{{$index+1}}</td>
              <td><input type="text" required ng-model="item.depreciation_item"/></td>
              <td><input type="text" required name="depreciation_total_{{item.id}}" ng-model="item.depreciation_total" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="number" required ng-model="item.depreciation_cost_year_percent"/></td>
              <td><input type="text" required name="depreciation_cost_year_{{item.id}}" ng-model="item.depreciation_cost_year" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="text" required name="depreciation_cost_month_{{item.id}}" ng-model="item.depreciation_cost_month" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_depreciation_costs, item)" class="del">Мөр хасах -</a></td>
            </tr>
            <tr>
              <td></td>
              <td><a href="" ng-click="add_item_to_array(plan.pr_depreciation_costs, 'pr_depreciation_costs', 0)">Мөр нэмэх +<a></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <thead>
              <tr>
                <td colspan="6" style="text-align: left !important;">Бизнес төлөвлөгөөг хэрэгжүүлэх үед шинээр худалдан авах</td>
              </tr>
            </thead>
            <tr ng-repeat="item in plan.pr_depreciation_costs | filter: filterByDepreciationCost2">
              <td>{{$index+1}}</td>
              <td><input type="text" required ng-model="item.depreciation_item"/></td>
              <td><input type="text" required name="depreciation_total_{{item.id}}" ng-model="item.depreciation_total" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="number" required ng-model="item.depreciation_cost_year_percent"/></td>
              <td><input type="text" required name="depreciation_cost_year_{{item.id}}" ng-model="item.depreciation_cost_year" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="text" required name="depreciation_cost_month_{{item.id}}" ng-model="item.depreciation_cost_month" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_depreciation_costs, item)" class="del">Мөр хасах -</a></td>
            </tr>
            <tr>
              <td></td>
              <td><a href="" ng-click="add_item_to_array(plan.pr_depreciation_costs, 'pr_depreciation_costs', 1)">Мөр нэмэх +<a></td>
              <td></td>
              <td></td>
              <td ></td>
            </tr>
          </tbody>
        </table>

        <br>
        <label class="subtitle">Бусад зардал</label>
        <br>
        <table>
          <tbody>
            <thead>
              <tr>
                <td>#</td>
                <td style="width: 35%">Зардлууд</td>
                <td style="width: 20%;">{{year-3}}</td>
                <td style="width: 20%;">{{year-2}}</td>
                <td style="width: 20%;">{{year-1}}</td>
                <td></td>
              </tr>
            </thead>
            <tr ng-repeat="item in plan.pr_other_costs">
              <td>{{$index+1}}</td>
              <td><input type="text" required ng-model="item.other_costs_item"/></td>
              <td><input type="text" required name="other_costs_cost1_{{item.id}}" ng-model="item.other_costs_cost1" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="text" required name="other_costs_cost2_{{item.id}}" ng-model="item.other_costs_cost2" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><input type="text" required name="other_costs_cost3_{{item.id}}" ng-model="item.other_costs_cost3" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000"/></td>
              <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_other_costs, item)" class="del">Мөр хасах -</a></td>
            </tr>
            <tr>
              <td></td>
              <td><a href="" ng-click="add_item_to_array(plan.pr_other_costs, 'pr_other_costs')">Мөр нэмэх +<a></td>
              <td></td>
              <td></td>
              <td ></td>
            </tr>
          </tbody>
        </table>
      </div>
        <ul class="form-list">
          <li>
            <button type="button" class="button red" ng-click="next(8,9)">БУЦАХ</button>
            <button type="submit" class="button">ЦААШ</button>
          </li>
        </ul>
      </form>

      <form id="form_10" hidden ng-submit="next(11,10)">
        <p>Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
        <hr>
        <div class="formed">
        <h2>10/10</h2>
        <label class="subtitle">Зээлийн мэдээлэл</label>
        <br>

        <ul class="form-list">
          <li class="form-list__row form-list__row--inline">
            <div class="c2">
              <label>Байгууллагын нэр</label>
              <input type="text" name="pr_loan_org_name" required="" ng-model="plan.pr_loan_org_name"/>
            </div>
            <div class="c1">
              <label>Зээлийн хэжмээ</label>
              <input type="text" name="pr_loan_amount"  pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" required ng-model="plan.pr_loan_amount"/>
            </div>
            <div class="c2">
              <label>Зээлийн хүү</label>
              <input type="number" name="pr_loan_rate" required="" ng-model="plan.pr_loan_rate"/>
            </div>
            <div class="c3">
              <label>Хугацаа</label>
              <input type="number" name="pr_loan_duration" required="" ng-model="plan.pr_loan_duration"/>
            </div>
          </li>
        </ul>
        <br>
        <label class="subtitle">Зээлийн эргэн төлөлтийн хуваарь</label>
        <br>
        <table style="width: 75%;">
          <tbody>
            <thead>
              <tr>
                <td>#</td>
                <td style="width: 35%">Огноо</td>
                <td style="width: 15%;">Хоног</td>
                <td style="width: 15%;">Хүүгийн төлбөр</td>
                <td style="width: 15%;">Зээлийн төлбөр</td>
                <td style="width: 15%;">Зээлийн үлдэгдэл</td>
                <td style="width: 5%;"></td>
              </tr>
            </thead>
            <tr ng-repeat="item in plan.pr_loan_dates">
              <td>{{$index+1}}</td>
              <td><input date-format type="date" required ng-model="item.loan_date"/></td>
              <td><input type="number" required ng-model="item.loan_day"/></td>
              <td><input type="text" name="loan_rate_amount_{{item.id}}" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" required ng-model="item.loan_rate_amount"/></td>
              <td><input type="text" name="loan_amount_{{item.id}}" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" required ng-model="item.loan_amount"/></td>
              <td><input type="text" name="loan_balance_{{item.id}}" pattern="^\₮\d{1,3}(,\d{3})*(\.\d+)?$" data-type="currency" placeholder="₮ 1,000,000" required ng-model="item.loan_balance"/></td>
              <td><a href="" ng-show="$index>=1" ng-click="remove_item_to_array(plan.pr_loan_dates, item)" class="del">Мөр хасах -</a></td>
            </tr>
            <tr>
              <td></td>
              <td><a href="" ng-click="add_item_to_array(plan.pr_loan_dates, 'pr_loan_dates')">Мөр нэмэх +<a></td>
              <td></td>
              <td></td>
              <td ></td>
            </tr>
          </tbody>
        </table>
      </div>
        <ul class="form-list">
          <li>
            <button type="button" class="button red" ng-click="next(9,10)">БУЦАХ</button>
            <button type="submit" class="button">ЦААШ</button>
          </li>
        </ul>
      </form>

      <form id="form_11" hidden>
        <p>Нэвтэрсэн хэрэглэгч : {{signedUser.name}}</p>
        <hr>
        <p>{{planResponse.msg}}</p>
        <button type="button" class="button red" ng-click="next(10, 11)">БУЦАХ</button>
        <button type="button" class="button" ng-click="planSave()">ХАДГАЛАХ</button>

        <div class="formed" id="html">
          <style type="text/css">
            table.normal {
                width: 100%;
                flex-direction: column;
            }
            table.normal td {
              border: 1px solid black;
              vertical-align: top;
              padding: 2px 5px !important;
              text-transform: none;
            }

            b {
              width: 100%;
              display: block;
            }

        </style>
          <table class="normal">
            <tr>
              <td style="width: 30%;">Төсөл хэрэгжүүлэх&nbsp;хугацаа</td>
              <td style="width: 70%;">{{durationRender(plan.pr_duration)}}</td>
            </tr>
            <tr>
              <td style="width: 30%;">Төслийн нэр</td>
              <td style="width: 70%;">{{plan.pr_name}}</td>
            </tr>
            <tr>
              <td style="width: 30%;">Санхүүжүүлэгч байгууллага</td>
              <td style="width: 70%;">{{plan.pr_fund_org}}</td>
            </tr>
            <tr>
              <td style="width: 30%;">Төсөл хэрэгжүүлэгчийн нэр</td>
              <td style="width: 70%;">{{plan.pr_owner_name}}</td>
            </tr>
            <tr>
              <td style="width: 30%;">Төсөв(нийт) Үүнээс:<br>-Санхүүжүүлэгчээс<br>-Өөрөөс</td>
              <td style="width: 70%;">₮ {{plan.pr_budget_total | number:2}}<br>₮ {{plan.pr_budget_funder | number:2}}<br>₮ {{plan.pr_budget_me | number:2}}</td>
            </tr>
            <tr>
              <td style="width: 30%;">Зорилго</td>
              <td style="width: 70%;">{{plan.pr_purpose}}</td>
            </tr>
            <tr>
              <td style="width: 30%;">Хүлээгдэж буй үр дүн</td>
              <td style="width: 70%;">{{plan.pr_expected_result}}</td>
            </tr>
          </table>
          <br>
          <b>1. Бизнесийн танилцуулга</b>
          <p>{{plan.pr_business_detail}}</p>

          <b>2. Төслийн үндэслэл</b>
          <p>{{plan.pr_grounds}}</p>

          <b>3. Хөрөнгө оруулалтын төлөвлөгөө</b>
          <table class="normal">
            <tr>
              <td></td>
              <td style="width: 25%;"><strong>Зүйл</strong></td>
              <td style="width: 25%;"><strong>Зардал</strong></td>
              <td style="width: 25%;"><strong>Огноо</strong></td>
              <td style="width: 25%;"><strong>Тайлбар</strong></td>
            </tr>
            <tr ng-repeat="item in plan.pr_investment_plan">
              <td>{{$index+1}}</td>
              <td style="width: 25%;">{{item.investment_item}}</td>
              <td style="width: 25%;">₮ {{item.investment_cost | number:2}}</td>
              <td style="width: 25%;">{{item.investment_date}}</td>
              <td style="width: 25%;">{{item.investment_detail}}</td>
            </tr>
          </table>


        </div>
      </form>

    </div> <!-- END: .modal__content -->
  </div> <!-- END: .modal__container -->
</div> <!-- END: .modal -->
</body>
<script>
  var user;

  function parseJwt (token) {
      var base64Url = token.split('.')[1];
      var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));

      return JSON.parse(jsonPayload);
  };

  function formatNumber(n) {
    // format number 1000000 to 1,234,567
    return n.replace(/\D/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ",")
  }


  function formatCurrency(input, blur) {
    var input_val = input.val();
    if (!input_val || input_val === "") { return; }
    var original_len = input_val.length;
    var caret_pos = input.prop("selectionStart");
    if (input_val.indexOf(".") >= 0) {
      var decimal_pos = input_val.indexOf(".");
      var left_side = input_val.substring(0, decimal_pos);
      var right_side = input_val.substring(decimal_pos);
      left_side = formatNumber(left_side);
      right_side = formatNumber(right_side);
      if (blur === "blur") {
        right_side += "00";
      }

      right_side = right_side.substring(0, 2);
      input_val = "₮" + left_side + "." + right_side;
    } else {
      input_val = formatNumber(input_val);
      input_val = "₮" + input_val;

      if (blur === "blur") {
        input_val += ".00";
      }
    }

    input.val(input_val);

    var updated_len = input_val.length;
    caret_pos = updated_len - original_len + caret_pos;
    input[0].setSelectionRange(caret_pos, caret_pos);
  }

  $("input[data-type='currency']").on({
      keyup: function() {
        formatCurrency($(this));
      },
      blur: function() {
        formatCurrency($(this), "blur");
      },
      focus: function() {
        formatCurrency($(this));
      },
      input: function() {
        formatCurrency($(this));
      }
  });

  function saveFileAs(response) {
     var contentDisposition = response.headers("content-disposition");
     //Retrieve file name from content-disposition
     var fileName = contentDisposition.substr(contentDisposition.indexOf("filename=") + 9);
     fileName = fileName.replace(/\"/g, "");
     var contentType = response.headers("content-type");
     var blob = new Blob([response.data], { type: contentType });
     saveAs(blob, fileName);
 }

  function handleCredentialResponse(response) {
    $.cookie('jwt', response.credential);
    $('#startBtnPlan').show();
  }
</script>

<script src="public/app.js"></script>
</html>
